<!--WIlliam Bukowski was here-->
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Pong Game</title>
    <style>
        /* CSS styles */
        body {
            margin: 0;
            overflow: hidden;
        }
        
        canvas {
            background-color: #000000;
            border: #f50000;
            border-style: solid;
            border-width: 10px;
            display: block;
            margin: auto;
        }
    </style>
</head>
<body>
    <canvas id="gameCanvas"></canvas>

    <script>
        class PongGame {
            constructor() {
                this.canvas = document.getElementById("gameCanvas");
                this.context = this.canvas.getContext("2d");
                
                this.ball = {
                    x: this.canvas.width / 2,
                    y: this.canvas.height / 2,
                    radius: 10,
                    dx: 3,
                    dy: 3,
                    speed: 4,
                };

                this.paddle = {
                    width: 10,
                    height: 60,
                    x: 30,
                    y: this.canvas.height / 2 - 30,
                    dy: 10
                };
                this.opponentPaddle = {
                    width: 10,
                    height: 60,
                    x: this.canvas.width - 40,
                    y: this.canvas.height / 2 - 30
                };

                this.setupEventListeners();
                this.startGame();
            }

            setupEventListeners() {
                // Touch event listeners
                this.canvas.addEventListener("touchstart", this.touchStartHandler.bind(this));
                this.canvas.addEventListener("touchmove", this.touchMoveHandler.bind(this));
                this.canvas.addEventListener("touchend", this.touchEndHandler.bind(this));
                
                // Mouse event listeners
                this.canvas.addEventListener("mousedown", this.mouseDownHandler.bind(this));
                this.canvas.addEventListener("mousemove", this.mouseMoveHandler.bind(this));
                this.canvas.addEventListener("mouseup", this.mouseUpHandler.bind(this));
                
                // Keyboard event listener
                document.addEventListener("keydown", this.keyDownHandler.bind(this));
            }
        
            touchStartHandler(event) {
                event.preventDefault();
                this.touchStartY = event.touches[0].clientY;
            }
        
            touchMoveHandler(event) {
                event.preventDefault();
                const touchY = event.touches[0].clientY;
        
                if (touchY < this.touchStartY) {
                    this.movePaddleUp();
                } else if (touchY > this.touchStartY) {
                    this.movePaddleDown();
                }
            }
        
            touchEndHandler(event) {
                event.preventDefault();
                this.stopPaddleMovement();
            }

            mouseDownHandler(event) {
                event.preventDefault();
                this.isMousePressed = true;
            }

            mouseMoveHandler(event) {
                event.preventDefault();
                if (this.isMousePressed) {
                    const rect = this.canvas.getBoundingClientRect();
                    const mouseY = event.clientY - rect.top;
                    if (mouseY < this.paddle.y) {
                        this.movePaddleUp();
                    } else {
                        this.movePaddleDown();
                    }
                }
            }

            mouseUpHandler(event) {
                event.preventDefault();
                this.isMousePressed = false;
                this.stopPaddleMovement();
            }

            keyDownHandler(event) {
                if (event.key === "ArrowUp" || event.key === "Up") {
                    this.movePaddleUp();
                } else if (event.key === "ArrowDown" || event.key === "Down") {
                    this.movePaddleDown();
                }
            }

            movePaddleUp() {
                this.paddle.y -= this.paddle.dy;
            }

            movePaddleDown() {
                this.paddle.y += this.paddle.dy;
            }

            drawBall() {
                this.context.beginPath();
                this.context.arc(this.ball.x, this.ball.y, this.ball.radius, 0, Math.PI * 2, false);
                this.context.fillStyle = "#FFFFFF";
                this.context.fill();
                this.context.closePath();
            }

            drawPaddle() {
                this.context.fillStyle = "#FFFFFF";
                this.context.fillRect(this.paddle.x, this.paddle.y, this.paddle.width, this.paddle.height);
            }

            drawOpponentPaddle() {
                this.context.fillStyle = "#FFFFFF";
                this.context.fillRect(this.opponentPaddle.x, this.opponentPaddle.y, this.opponentPaddle.width, this.opponentPaddle.height);
            }

            update() {
                this.context.clearRect(0, 0, this.canvas.width, this.canvas.height);

                this.drawBall();
                this.drawPaddle();
                this.drawOpponentPaddle();

                this.ball.x += this.ball.dx;
                this.ball.y += this.ball.dy;

                if (this.ball.y + this.ball.radius > this.canvas.height || this.ball.y - this.ball.radius < 0) {
                    this.ball.dy *= -1;
                }

                if (this.ball.x - this.ball.radius < this.paddle.x + this.paddle.width &&
                    this.ball.y > this.paddle.y &&
                    this.ball.y < this.paddle.y + this.paddle.height) {
                    this.ball.dx *= -1;
                }
                
                if (this.ball.x + this.ball.radius > this.opponentPaddle.x &&
                    this.ball.y > this.opponentPaddle.y &&
                    this.ball.y < this.opponentPaddle.y + this.opponentPaddle.height) {
                    this.ball.dx *= -1;
                }

                if (this.ball.x - this.ball.radius < 0) {
                    alert("Game Over");
                    this.resetGame();
                    this.startGame();
                }

                requestAnimationFrame(this.update.bind(this));
            }

            resetGame() {
                this.ball.x = this.canvas.width / 2;
                this.ball.y = this.canvas.height / 2;
                this.ball.dx = 3;
                this.ball.dy = 3;
            }

            startGame() {
                this.canvas.width = 650;
                this.canvas.height = 420;
                this.update();
            }
        }

        // Create an instance of the PongGame class
        const pongGame = new PongGame();
    </script>
</body>
</html>
